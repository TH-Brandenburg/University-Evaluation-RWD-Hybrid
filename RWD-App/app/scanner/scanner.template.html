<html ng-app="App">
  <head>
    <base href=".">
    <title>Evaluation Technische Hochschule Brandenburg</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  </head>
  <body>

<div class="main-content" ng-app="App" >

    <h2 style="text-align: center ; color: #369;font-family: Arial;">QR-Scanner</h2>
    <p style="text-align: center ; color: #369;font-family: Arial;">Bitte scannen Sie den QR Code, um mit der Evaluation zu beginnen.</p>

    <div  ng-controller="qrCrtl"  align="center">
        <!--<p><label>Error:</label> {{error}}</p>-->
        <qr-scanner width="400" height="300" ng-success="onSuccess(data)" ng-error="onError(error)" />
        <!--<p style="text-align: center ; color: #369;font-family: Arial;"><label>Result:</label> {{data}}</p>-->
    </div>






<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.js"></script>
<script src="js/qr-scanner.js"></script>
<script src="js/jsqrcode-combined.min.js"></script>
<script>
    var App = angular.module('App', ['qrScanner']);
    App.controller('qrCrtl', ['$scope', function($scope, $window) {

        $scope.onSuccess = function(data) {
            $scope.data = data;
            try{
                JSON.parse(data);
                localStorage.setItem("scanner", data);
                localStorage.setItem("appStarted", true);
                location.replace('../../course');
            }catch(e){
            }
        };
        $scope.onError = function(error) {
            $scope.error = error;
        };
        $scope.onVideoError = function(error) {
            $scope.error = error;
        };
    }]);
</script>
</div>
</body>
</html>
